<Window x:Class="Shell.Views.ShellView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Shell.Views"
        xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
        xmlns:shell="clr-namespace:Shell"
        xmlns:cal="clr-namespace:Microsoft.Practices.Prism.Regions;assembly=Microsoft.Practices.Prism"
        xmlns:Infrastructure="clr-namespace:SING.Infrastructure;assembly=SING.Infrastructure"
        xmlns:Clocks="clr-namespace:Shell.DigitalClock"
        mc:Ignorable="d" WindowStartupLocation="CenterScreen" Icon="../Resources/logoIcon.png" WindowChrome.WindowChrome="{DynamicResource WindowChromeKey}"
        Closing="Window_Closing" Background="Transparent" ResizeMode="CanResizeWithGrip" WindowStyle="None"
        x:Name="window">
    
    <Window.Resources>
        <WindowChrome x:Key="WindowChromeKey">
            <WindowChrome.ResizeBorderThickness>
                <Thickness>5</Thickness>
            </WindowChrome.ResizeBorderThickness>
        </WindowChrome>
        <LinearGradientBrush x:Key="RectangleOperateBackground" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#065387" Offset="0"/>
            <GradientStop Color="#0772B8" Offset="0.20"/>
            <GradientStop Color="#0772B8" Offset="0.80"/>
            <GradientStop Color="#065387" Offset="1"/>
        </LinearGradientBrush>


        <LinearGradientBrush x:Key="OpendWindowTitleBackground" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#B1D9F3" Offset="1" />
            <GradientStop Color="#E8F3FA" Offset="0" />
        </LinearGradientBrush>


        <DataTemplate x:Key="OpendWindowListItem">
            <DockPanel x:Name="BackgroundVisual" Height="25" Width="198" Margin="1,0,1,0">
                <TextBlock x:Name="TextElement" DockPanel.Dock="Left" Text="{Binding Title}" Foreground="Black" FontSize="12" Height="18" VerticalAlignment="Center" Margin="4,4,4,2" />
                <Ellipse x:Name="EllipsElement" DockPanel.Dock="Right" Fill="{Binding ActiveColor}" Width="10" Height="10" Margin="0,7,4,7" VerticalAlignment="Center" HorizontalAlignment="Right"></Ellipse>
                <telerik:RadContextMenu.ContextMenu>
                    <telerik:RadContextMenu>
                        <telerik:RadContextMenu.Items>
                            <telerik:RadMenuItem Header="打开" Click="RadMenuItemOpen_Click" />
                            <telerik:RadMenuItem Header="关闭" Click="RadMenuItemClose_Click" />
                        </telerik:RadContextMenu.Items>
                    </telerik:RadContextMenu>
                </telerik:RadContextMenu.ContextMenu>
            </DockPanel>
            <DataTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="BackgroundVisual" Property="Background" Value="#4DA3D6"></Setter>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="False">
                    <Setter TargetName="BackgroundVisual" Property="Background" Value="#DCE6F4"></Setter>
                </Trigger>
            </DataTemplate.Triggers>
        </DataTemplate>

        <ControlTemplate x:Key="OperateBtnTemplate" TargetType="Button">
            <Grid x:Name="OperateBtnGrid" Width="50" Height="22">
                <Rectangle x:Name="RectangleOperate" Fill="{StaticResource RectangleOperateBackground}" Width="50" Height="22" StrokeThickness="0" HorizontalAlignment="Center" VerticalAlignment="Center" RadiusX="5" RadiusY="5" Opacity="1">
                </Rectangle>
                <TextBlock x:Name="OperateTextBlock" Text="{TemplateBinding Content}" FontSize="14"  HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="White" FontWeight="Bold"></TextBlock>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="RectangleOperate" Property="Fill" Value="White"/>
                    <Setter TargetName="OperateTextBlock" Property="Foreground" Value="Black"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <LinearGradientBrush x:Key="HeaderBackground" EndPoint="0,1">
            <GradientStop Offset="0" Color="#868686"/>
            <GradientStop Offset="1" Color="#0D0D0D" />
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="TopMenuBrush_Windows7" EndPoint="0.5,1" StartPoint="0.5,0">
            <!--<GradientStop Color="#616163" Offset="0"/>
            <GradientStop Color="#595959" Offset="0.50"/>
            <GradientStop Color="#525252" Offset="0.51"/>
            <GradientStop Color="#404042" Offset="1"/>-->
            <GradientStop Color="#2D2D30" Offset="0"/>
            <GradientStop Color="#414141" Offset="0.50"/>
            <GradientStop Color="#444444" Offset="0.51"/>
            <GradientStop Color="#443F3F" Offset="1"/>
        </LinearGradientBrush>

        <SolidColorBrush x:Key="MenuItemSeparatorDark" Color="#FFE4E4E4" />
        <SolidColorBrush x:Key="MenuItemSeparatorLight" Color="White" />

        <SolidColorBrush x:Key="MenuItemSpecialLinkForeground" Color="#FF0066CC" />

        <SolidColorBrush x:Key="MenuItemParagraphForeground" Color="#FF595959" />

        <SolidColorBrush x:Key="MenuDropDownFrame" Color="#FFACACAC" />
        <SolidColorBrush x:Key="MenuDorpDownInnerBorder" Color="White" />

        <LinearGradientBrush x:Key="MenuDropDownBackground" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#F4F4F4" Offset="0" />
            <GradientStop Color="#DBDBDB" Offset="1" />
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="MenuDropDownBackgroundDisEnabled" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#CBCBCB" Offset="0" />
            <GradientStop Color="#D6D6D6" Offset="0.5" />
            <GradientStop Color="#CBCBCB" Offset="1" />
        </LinearGradientBrush>

        <SolidColorBrush x:Key="MenuDropDownTextDisEnabled" Color="#808080" />

        <ControlTemplate x:Key="MenuItemTopLevelControlTemplate" TargetType="telerik:RadMenuItem">
            <Grid>
                <Rectangle x:Name="BackgroundVisual" Fill="{StaticResource MenuDorpDownInnerBorder}" Opacity="0" />
                <TextBlock x:Name="TextElement" Text="{Binding Content}" TextDecorations="None" Foreground="White" FontWeight="Bold" Margin="15 6 40 6" HorizontalAlignment="Right" VerticalAlignment="Center" FontSize="14" />
                <Path x:Name="DropDownArrow" Fill="White" Data="M0,0 L2,0 1,1" Stretch="Uniform" Width="10" Height="8" HorizontalAlignment="Right"  VerticalAlignment="Center" Margin="8 4 20 0" />
                <Popup x:Name="PART_Popup" Margin="1 2 0 0" IsOpen="{TemplateBinding IsSubmenuOpen}">
                    <Border BorderBrush="#474747" BorderThickness="1" Background="{StaticResource MenuDropDownFrame}">
                        <Border Background="{StaticResource MenuDropDownBackground}" BorderBrush="#CECECE" BorderThickness="1">
                            <ItemsPresenter Margin="0"/>
                        </Border>
                    </Border>
                </Popup>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="TextElement" Property="Foreground" Value="Black" />
                    <Setter TargetName="DropDownArrow" Property="Fill" Value="Black" />
                </Trigger>
                <Trigger Property="IsKeyboardFocusWithin" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundVisual" Storyboard.TargetProperty="Opacity">
                                    <LinearDoubleKeyFrame KeyTime="00:00:00.1" Value="1" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundVisual" Storyboard.TargetProperty="Opacity">
                                    <LinearDoubleKeyFrame KeyTime="00:00:00.2" Value="0" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="MenuItemSTopLevelControlTemplate" TargetType="telerik:RadMenuItem">
            <Grid x:Name="ControlGrid" Background="{StaticResource MenuDropDownBackground}">
                <Rectangle x:Name="BackgroundVisual" Fill="#1B6EBE" Opacity="0" />
                <TextBlock x:Name="TextElement" Text="{Binding Content}" TextDecorations="None" Foreground="#FF2C2C2C" FontWeight="Bold" Margin="15 6 40 6" HorizontalAlignment="Left" VerticalAlignment="Center" FontSize="14" />
                <Path x:Name="DropDownArrow" Fill="#FF2C2C2C" Data="M0,0 L0,2 1,1" Stretch="Uniform" Width="8" Height="10" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="1 2 20 0" />
                <Popup x:Name="PART_Popup" Margin="-1 2 0 0" IsOpen="{TemplateBinding IsSubmenuOpen}">
                    <Border BorderBrush="#474747" BorderThickness="1" Background="{StaticResource MenuDropDownFrame}">
                        <Border BorderBrush="#CECECE" BorderThickness="1">
                            <ItemsPresenter Margin="0" />
                        </Border>
                    </Border>
                </Popup>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="TextElement" Property="Foreground" Value="White" />
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter TargetName="ControlGrid" Property="Background" Value="{StaticResource MenuDropDownBackgroundDisEnabled}"/>
                    <Setter TargetName="TextElement" Property="Foreground" Value="{StaticResource MenuDropDownTextDisEnabled}" />
                </Trigger>
                <Trigger Property="IsKeyboardFocusWithin" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundVisual" Storyboard.TargetProperty="Opacity">
                                    <LinearDoubleKeyFrame KeyTime="00:00:00.1" Value="1" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundVisual" Storyboard.TargetProperty="Opacity">
                                    <LinearDoubleKeyFrame KeyTime="00:00:00.2" Value="0" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="MenuItemTopLevelSectionControlTemplate" TargetType="telerik:RadMenuItem">
            <Grid>
                <ItemsPresenter />
                <Popup x:Name="PART_Popup">
                    <Rectangle />
                </Popup>
            </Grid>
        </ControlTemplate>

        <ControlTemplate x:Key="MenuItemTopLevelSectionSeparatorControlTemplate" TargetType="telerik:RadMenuItem">
            <Border MinHeight="100" BorderThickness="1 0 0 0" Background="{StaticResource MenuItemSeparatorLight}" BorderBrush="{StaticResource MenuItemSeparatorDark}" Width="2" Margin="4 32 8 8" />
        </ControlTemplate>

        <ControlTemplate x:Key="MenuItemTitleControlTemplate" TargetType="telerik:RadMenuItem">
            <Grid Background="{StaticResource MenuDropDownBackground}">
                <Rectangle x:Name="BackgroundVisual" Fill="#1B6EBE" Opacity="0" />
                <TextBlock x:Name="TextElement" Text="{Binding Content}" Foreground="#FF2C2C2C" FontSize="14" VerticalAlignment="Center" Margin="11,2,11,2" />
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="TextElement" Property="Foreground" Value="White" />
                </Trigger>
                <Trigger Property="IsKeyboardFocusWithin" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundVisual" Storyboard.TargetProperty="Opacity">
                                    <LinearDoubleKeyFrame KeyTime="00:00:00.1" Value="1" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundVisual" Storyboard.TargetProperty="Opacity">
                                    <LinearDoubleKeyFrame KeyTime="00:00:00.2" Value="0" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="MenuItemLinkControlTemplate" TargetType="telerik:RadMenuItem">
            <Grid x:Name="ControlGrid" Background="{StaticResource MenuDropDownBackground}">
                <Rectangle x:Name="BackgroundVisual" Fill="#1B6EBE" Opacity="0" /> <!--修改二级标题颜色-->
                <TextBlock x:Name="TextElement" Text="{Binding Content}" TextDecorations="None" VerticalAlignment="Center"  Margin="11 6 10 6" Foreground="#FF2C2C2C" FontSize="14" />
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="TextElement" Property="Foreground" Value="White" />
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter TargetName="ControlGrid" Property="Background" Value="{StaticResource MenuDropDownBackgroundDisEnabled}" />
                    <Setter TargetName="TextElement" Property="Foreground" Value="{StaticResource MenuDropDownTextDisEnabled}" />
                </Trigger>
                <Trigger Property="IsKeyboardFocusWithin" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundVisual" Storyboard.TargetProperty="Opacity">
                                    <LinearDoubleKeyFrame KeyTime="00:00:00.1" Value="1" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundVisual" Storyboard.TargetProperty="Opacity">
                                    <LinearDoubleKeyFrame KeyTime="00:00:00.2" Value="0" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="MenuItemSpecialLinkControlTemplate" TargetType="telerik:RadMenuItem">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="MoreMark" Grid.Column="0" Text="» " TextDecorations="None" Foreground="{StaticResource MenuItemSpecialLinkForeground}" FontSize="11" />
                <TextBlock x:Name="TextElement" Grid.Column="1" Text="{Binding Content}" TextDecorations="None" Foreground="{StaticResource MenuItemSpecialLinkForeground}" FontSize="11" />
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="TextElement" Property="TextDecorations" Value="Underline" />
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="MenuItemParagraphControlTemplate" TargetType="telerik:RadMenuItem">
            <TextBlock x:Name="TextElement" Text="{Binding Content}" Foreground="{StaticResource MenuItemParagraphForeground}" TextWrapping="Wrap" FontSize="11" />
        </ControlTemplate>

        <ControlTemplate x:Key="MenuItemGalleryControlTemplate" TargetType="telerik:RadMenuItem">
            <Grid>
                <Rectangle x:Name="BackgroundVisual" Fill="{StaticResource MenuDorpDownInnerBorder}" Opacity="0" />
                <StackPanel x:Name="PanelElement" Orientation="Horizontal" Background="White" VerticalAlignment="Center" Margin="20,8,20,8">
                    <TextBlock x:Name="TextElement" Text="{Binding Content}" TextDecorations="None" Foreground="Black" FontWeight="Bold" Margin="8 4 20 4" HorizontalAlignment="Right" VerticalAlignment="Center" FontSize="14" />
                    <Path x:Name="DropDownArrow" Fill="Black" Data="M0,0 L2,0 1,1" Stretch="Uniform" Width="10" Height="8" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="8 4 5 0" />
                </StackPanel>
                <Popup x:Name="PART_Popup" Margin="1 2 0 0" IsOpen="{TemplateBinding IsSubmenuOpen}" PlacementTarget="{Binding ElementName=PanelElement}" Placement="Bottom">
                    <Border BorderBrush="#474747" BorderThickness="1" Background="{StaticResource MenuDropDownFrame}">
                        <Border Background="{StaticResource MenuDropDownBackground}" BorderBrush="#CECECE" BorderThickness="1">
                            <ItemsPresenter Margin="0"/>
                        </Border>
                    </Border>
                </Popup>
            </Grid>
        </ControlTemplate>

        <ControlTemplate x:Key="MenuItemImageControlTemplate" TargetType="telerik:RadMenuItem">
            <Grid>
                <Rectangle x:Name="BackgroundVisual" Fill="{StaticResource MenuDorpDownInnerBorder}" Height="24" Width="24" Opacity="0" />
                <Image Name="imgElement" Source="{Binding Content}" ToolTipService.ToolTip="{Binding ToolTip}" Height="20" Width="20" Stretch="UniformToFill"  Cursor="Hand" HorizontalAlignment="Center" SnapsToDevicePixels="True" RenderOptions.BitmapScalingMode="NearestNeighbor" RenderOptions.EdgeMode="Aliased" />
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundVisual" Storyboard.TargetProperty="Opacity">
                                    <LinearDoubleKeyFrame KeyTime="00:00:00.1" Value="1" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundVisual" Storyboard.TargetProperty="Opacity">
                                    <LinearDoubleKeyFrame KeyTime="00:00:00.2" Value="0" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="MenuItemLogoControlTemplate" TargetType="telerik:RadMenuItem">
            <Grid>
                <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                    <Grid Margin="5,0,0,0">
                        <Image Name="imgElement" Source="{Binding Content}" MouseLeftButtonDown="MainWindow_MouseLeftButtonDown" Height="50" Width="50" Stretch="UniformToFill"  Cursor="Hand" VerticalAlignment="Top" HorizontalAlignment="Center" OpacityMask="Black" SnapsToDevicePixels="True" RenderOptions.BitmapScalingMode="NearestNeighbor" RenderOptions.EdgeMode="Aliased" />
                    </Grid>
                    <TextBlock x:Name="TxtTitle" Text="{Binding ToolTip}" MouseLeftButtonDown="MainWindow_MouseLeftButtonDown" TextDecorations="None" Margin="5 0 40 0" HorizontalAlignment="Right"  VerticalAlignment="Bottom"  FontSize="35" Foreground="#16E8FA" FontWeight="Bold">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="Wheat" ShadowDepth="2"></DropShadowEffect>
                        </TextBlock.Effect>
                    </TextBlock>
                </StackPanel>
            </Grid>
        </ControlTemplate>

        <ControlTemplate x:Key="ParagraphImageMenuItemControlTemplate" TargetType="telerik:RadMenuItem">
            <Grid Cursor="Hand" Background="#00888888">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Image Grid.RowSpan="2" Grid.Column="0" Margin="4" HorizontalAlignment="Left" VerticalAlignment="Top" SnapsToDevicePixels="True" Source="{Binding Image}" RenderOptions.BitmapScalingMode="NearestNeighbor" RenderOptions.EdgeMode="Aliased" />
                <TextBlock x:Name="TitleElement" Grid.Row="0" Grid.Column="1" Margin="4 4 4 -5" MaxWidth="200" TextWrapping="Wrap" HorizontalAlignment="Left" VerticalAlignment="Top" FontSize="13" Text="{Binding Title}" Foreground="Black" />
                <TextBlock x:Name="SummaryElement" Grid.Row="1" Grid.Column="1" Margin="4 -5 4 4" MaxWidth="200" TextWrapping="Wrap" HorizontalAlignment="Left" VerticalAlignment="Top" Text="{Binding Summary}" FontSize="11" Foreground="{StaticResource MenuItemParagraphForeground}" />
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="TitleElement" Property="Foreground" Value="#FF0066CC" />
                    <Setter TargetName="TitleElement" Property="TextDecorations" Value="Underline" />
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="MenuItemButtonControlTemplate" TargetType="telerik:RadMenuItem">
            <Button x:Name="ButtonElement" Content="{Binding Content}"></Button>
        </ControlTemplate>

        <ControlTemplate x:Key="MenuItemComboxControlTemplate" TargetType="telerik:RadMenuItem">
            <Grid Background="{StaticResource MenuDropDownBackground}" Height="50">
                <Rectangle x:Name="BackgroundVisual" Fill="#1B6EBE" Opacity="0" />
                <GroupBox Header="{Binding Title}">
                    <ComboBox x:Name="ComboxElement"  ItemsSource="{Binding ComboxItems}" IsSynchronizedWithCurrentItem="False" SelectedIndex="{Binding SelectIndex,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
                </GroupBox>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsKeyboardFocusWithin" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundVisual" Storyboard.TargetProperty="Opacity">
                                    <LinearDoubleKeyFrame KeyTime="00:00:00.1" Value="1" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundVisual" Storyboard.TargetProperty="Opacity">
                                    <LinearDoubleKeyFrame KeyTime="00:00:00.2" Value="0" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="MenuItemSubscriptImageControlTemplate" TargetType="telerik:RadMenuItem">
            <Grid>
                <Rectangle x:Name="BackgroundVisual" Fill="{StaticResource MenuDorpDownInnerBorder}" Height="24" Width="24" Opacity="0" />
                <Image Name="imgElement" Source="{Binding Content}" ToolTipService.ToolTip="{Binding ToolTip}" Height="20" Width="20" Stretch="UniformToFill"  Cursor="Hand" HorizontalAlignment="Center" SnapsToDevicePixels="True" RenderOptions.BitmapScalingMode="NearestNeighbor" RenderOptions.EdgeMode="Aliased" />
                <Grid HorizontalAlignment="Right" VerticalAlignment="Top" Visibility="{Binding Visibility}">
                    <Ellipse Fill="White" Height="13" Width="13">
                        <Ellipse.Effect>
                            <DropShadowEffect BlurRadius="0" ShadowDepth="0" Opacity="0.8" Direction="360" RenderingBias="Performance"/>
                        </Ellipse.Effect>
                    </Ellipse>
                    <Ellipse Margin="1" Height="11" Width="11">
                        <Ellipse.Fill>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Offset="0" Color="#FFF4AEB1"/>
                                <GradientStop Offset="0.5" Color="#FFE3313A"/>
                                <GradientStop Offset="1" Color="#FFE3313A"/>
                            </LinearGradientBrush>
                        </Ellipse.Fill>
                    </Ellipse>
                    <Viewbox Stretch="Uniform" Height="11" Width="11">
                        <Label Content="{Binding PromptCount, UpdateSourceTrigger=PropertyChanged}" x:Name="lbProm" Foreground="White" FontWeight="Bold" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Viewbox>
                </Grid>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundVisual" Storyboard.TargetProperty="Opacity">
                                    <LinearDoubleKeyFrame KeyTime="00:00:00.1" Value="1" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundVisual" Storyboard.TargetProperty="Opacity">
                                    <LinearDoubleKeyFrame KeyTime="00:00:00.2" Value="0" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <Style x:Key="MenuItemBaseStyle" TargetType="telerik:RadMenuItem">
            <Setter Property="Header" Value="{Binding Content}"/>
            <Setter Property="IsSeparator" Value="{Binding IsSeparator}"/>
            <Setter Property="ItemsSource" Value="{Binding}"/>
            <Setter Property="Visibility" Value="{Binding MenuVisibility}"/>
            <Setter Property="IsEnabled" Value="{Binding MenuIsEnabled}"/>
            <Setter Property="DockPanel.Dock" Value="Left"/>
            <EventSetter Event="Click" Handler="Handle_Click" />
        </Style>

        <Style x:Key="MenuItemLogoStyle" TargetType="telerik:RadMenuItem" BasedOn="{StaticResource MenuItemBaseStyle}">
            <Setter Property="Template" Value="{StaticResource MenuItemLogoControlTemplate}"/>
            <Setter Property="Margin" Value="4 4 12 4" />
            <Setter Property="DockPanel.Dock" Value="Left"/>
        </Style>

        <Style x:Key="MenuItemTopLevelStyle" TargetType="telerik:RadMenuItem" BasedOn="{StaticResource MenuItemBaseStyle}">
            <Setter Property="Template" Value="{StaticResource MenuItemTopLevelControlTemplate}"/>
            <Setter Property="SeparatorTemplateKey" Value="{StaticResource MenuItemTopLevelControlTemplate}"/>
            <Setter Property="TopLevelHeaderTemplateKey" Value="{StaticResource MenuItemTopLevelControlTemplate}"/>
            <Setter Property="TopLevelItemTemplateKey" Value="{StaticResource MenuItemTopLevelControlTemplate}"/>
            <Setter Property="SubmenuHeaderTemplateKey" Value="{StaticResource MenuItemTopLevelControlTemplate}"/>
            <Setter Property="SubmenuItemTemplateKey" Value="{StaticResource MenuItemTopLevelControlTemplate}"/>
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="MenuItemSTopLevelStyle" TargetType="telerik:RadMenuItem" BasedOn="{StaticResource MenuItemBaseStyle}">
            <Setter Property="Template" Value="{StaticResource MenuItemSTopLevelControlTemplate}"/>
            <Setter Property="SeparatorTemplateKey" Value="{StaticResource MenuItemSTopLevelControlTemplate}"/>
            <Setter Property="SubmenuItemTemplateKey" Value="{StaticResource MenuItemSTopLevelControlTemplate}"/>
            <Setter Property="TopLevelHeaderTemplateKey" Value="{StaticResource MenuItemSTopLevelControlTemplate}"/>
            <Setter Property="TopLevelItemTemplateKey" Value="{StaticResource MenuItemSTopLevelControlTemplate}"/>
            <Setter Property="SubmenuHeaderTemplateKey" Value="{StaticResource MenuItemSTopLevelControlTemplate}"/>
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="MinWidth" Value="175"/>
            <Setter Property="Height" Value="50"></Setter>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="MenuItemTopLevelSectionStyle" TargetType="telerik:RadMenuItem" BasedOn="{StaticResource MenuItemBaseStyle}">
            <Setter Property="Template" Value="{StaticResource MenuItemTopLevelSectionControlTemplate}"/>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Vertical" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="Role" Value="Separator">
                    <Setter Property="Template" Value="{StaticResource MenuItemTopLevelSectionSeparatorControlTemplate}" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="MenuItemTitleStyle" TargetType="telerik:RadMenuItem" BasedOn="{StaticResource MenuItemBaseStyle}">
            <Setter Property="Template" Value="{StaticResource MenuItemTitleControlTemplate}"/>
            <Setter Property="Margin" Value="0 1 0 0" />
            <Setter Property="MinWidth" Value="175" />
            <Setter Property="Height" Value="50"></Setter>
        </Style>

        <Style x:Key="MenuItemLinkStyle" TargetType="telerik:RadMenuItem" BasedOn="{StaticResource MenuItemBaseStyle}">
            <Setter Property="Template" Value="{StaticResource MenuItemLinkControlTemplate}" />
            <Setter Property="Margin" Value="0 1 0 0" />
            <Setter Property="MinWidth" Value="175" />
            <Setter Property="Height" Value="50"></Setter>
        </Style>

        <Style x:Key="MenuItemSpecialLinkStyle" TargetType="telerik:RadMenuItem" BasedOn="{StaticResource MenuItemBaseStyle}">
            <Setter Property="Template" Value="{StaticResource MenuItemSpecialLinkControlTemplate}" />
            <Setter Property="Margin" Value="4 2 4 6" />
        </Style>

        <Style x:Key="MenuItemParagraphStyle" TargetType="telerik:RadMenuItem" BasedOn="{StaticResource MenuItemBaseStyle}">
            <Setter Property="Template" Value="{StaticResource MenuItemParagraphControlTemplate}"/>
            <!--<Setter Property="Margin" Value="4" />-->
            <Setter Property="Margin" Value="{Binding ParagraphMargin}" />
            <Setter Property="MaxWidth" Value="300" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
        </Style>

        <Style x:Key="MenuItemGalleryStyle" TargetType="telerik:RadMenuItem" BasedOn="{StaticResource MenuItemBaseStyle}">
            <Setter Property="Template" Value="{StaticResource MenuItemGalleryControlTemplate}"/>
            <Setter Property="DockPanel.Dock" Value="Right"/>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="MenuItemImageStyle" TargetType="telerik:RadMenuItem" BasedOn="{StaticResource MenuItemBaseStyle}">
            <Setter Property="Template" Value="{StaticResource MenuItemImageControlTemplate}"/>
            <Setter Property="Margin" Value="4 4 12 4" />
            <Setter Property="DockPanel.Dock" Value="Right"/>
        </Style>

        <Style x:Key="ParagraphImageMenuItemStyle" TargetType="telerik:RadMenuItem" BasedOn="{StaticResource MenuItemBaseStyle}">
            <Setter Property="Template" Value="{StaticResource ParagraphImageMenuItemControlTemplate}" />
            <Setter Property="Margin" Value="0 0 0 4" />
        </Style>

        <Style x:Key="ButtonMenuItemStyle" TargetType="telerik:RadMenuItem" BasedOn="{StaticResource MenuItemBaseStyle}">
            <Setter Property="Template" Value="{StaticResource MenuItemButtonControlTemplate}"/>
            <Setter Property="Margin" Value="0 0 0 4" />
        </Style>

        <Style x:Key="ComboxMenuItemStyle" TargetType="telerik:RadMenuItem" BasedOn="{StaticResource MenuItemBaseStyle}">
            <Setter Property="Template" Value="{StaticResource MenuItemComboxControlTemplate}"/>
            <Setter Property="Margin" Value="0 1 0 0" />
            <Setter Property="MinWidth" Value="175" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
        </Style>

        <Style x:Key="SubscriptImageMenuItemStyle" TargetType="telerik:RadMenuItem" BasedOn="{StaticResource MenuItemBaseStyle}">
            <Setter Property="Template" Value="{StaticResource MenuItemSubscriptImageControlTemplate}"/>
            <Setter Property="Margin" Value="4 4 12 4" />
            <Setter Property="DockPanel.Dock" Value="Right"/>
        </Style>

        <shell:MenuItemStyleSelector x:Key="MenuItemStyleSelector"
                                 Logo="{StaticResource MenuItemLogoStyle}"
                                 TopLevel="{StaticResource MenuItemTopLevelStyle}"
                                 STopLevel="{StaticResource MenuItemSTopLevelStyle}"
                                 TopLevelSection="{StaticResource MenuItemTopLevelSectionStyle}"
                                 Title="{StaticResource MenuItemTitleStyle}"
                                 Link="{StaticResource MenuItemLinkStyle}"
                                 SpecialLink="{StaticResource MenuItemSpecialLinkStyle}"
                                 Paragraph="{StaticResource MenuItemParagraphStyle}"
                                 Gallery="{StaticResource MenuItemGalleryStyle}"
                                 Image="{StaticResource MenuItemImageStyle}"
                                 ParagraphImage="{StaticResource ParagraphImageMenuItemStyle}"
                                 Button="{StaticResource ButtonMenuItemStyle}"
                                 Combox="{StaticResource ComboxMenuItemStyle}"
                                 SubscriptImage="{StaticResource SubscriptImageMenuItemStyle}"/>

        <Style x:Key="MenuStyle" TargetType="telerik:RadMenu">
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="BorderBrush" Value="#3F3F46"/>
            <!--<Setter Property="BorderBrush" Value="#6F6F6F"/>-->
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="ItemContainerStyleSelector" Value="{StaticResource MenuItemStyleSelector}"/>
            <Setter Property="ClickToOpen" Value="False" />
            <Setter Property="Height" Value="60"></Setter>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <DockPanel LastChildFill="False"></DockPanel>
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <DockPanel LastChildFill="True">
            <Grid SnapsToDevicePixels="True" DockPanel.Dock="Top">
                <telerik:RadMenu ShowDelay="5" x:Name="TopMenu" Style="{DynamicResource MenuStyle}" telerik:RadMenuItem.Click="OnRadMenuItemClick" ItemClick="TopMenu_OnItemClick" ItemsSource="{Binding ApplicationMenus}">
                </telerik:RadMenu>
            </Grid>
            <Border BorderThickness="3,1,3,3" BorderBrush="#16E8FA">
                <DockPanel x:Name="mainPanel">

                    <Grid x:Name="CenterGrid" RenderTransformOrigin="0.5,0.5" Width="Auto">
                        <ContentControl Background="Beige" x:Name="SofaContainerContent1" cal:RegionManager.RegionName="{x:Static Infrastructure:RegionNames.MainRegion}">
                            <ContentControl.Template>
                                <ControlTemplate TargetType="ContentControl">
                                    <Grid>
                                        <ContentPresenter Margin="2,0,2,0" Content="{TemplateBinding Content}" />
                                    </Grid>
                                </ControlTemplate>
                            </ContentControl.Template>
                        </ContentControl>
                    </Grid>
                </DockPanel>
            </Border>
        </DockPanel>
        
        <Grid x:Name="OpendWindow" Width="204" Height="Auto" Background="#DCE6F4" Panel.ZIndex="100" Visibility="Hidden" MouseDown="OpendWindow_MouseDown" MouseMove="OpendWindow_MouseMove" MouseUp="OpendWindow_MouseUp" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,30,3">
            <Border BorderThickness="1" BorderBrush="#2480C4">
                <StackPanel>
                    <StackPanel x:Name="OpendWindowTitle" Orientation="Horizontal" VerticalAlignment="Top" Height="25" Background="{StaticResource OpendWindowTitleBackground}" Margin="0">
                        <TextBlock Text="窗体列表" Width="194" Height="17" HorizontalAlignment="Left" Margin="4">
                            <telerik:RadContextMenu.ContextMenu>
                                <telerik:RadContextMenu>
                                    <telerik:RadContextMenu.Items>
                                        <telerik:RadMenuItem Header="不透明" DataContext="1" Click="RadWindowOpacity_Click" />
                                        <telerik:RadMenuItem Header="80%" DataContext="0.8" Click="RadWindowOpacity_Click" />
                                        <telerik:RadMenuItem Header="60%" DataContext="0.6" Click="RadWindowOpacity_Click" />
                                        <telerik:RadMenuItem Header="40%" DataContext="0.4" Click="RadWindowOpacity_Click" />
                                        <telerik:RadMenuItem Header="20%" DataContext="0.2" Click="RadWindowOpacity_Click" />
                                    </telerik:RadContextMenu.Items>
                                </telerik:RadContextMenu>
                            </telerik:RadContextMenu.ContextMenu>
                        </TextBlock>
                    </StackPanel>

                    <ListBox x:Name="OpendWindowListBox" Height="{Binding OpendWindowListWidth}" Width="202" Margin="0"
                             BorderThickness="0" VerticalAlignment="Bottom" Background="Transparent"
                             ItemTemplate="{StaticResource OpendWindowListItem}"
                             PreviewMouseDoubleClick="OpendWindowListBox_PreviewMouseDoubleClick" 
                             ItemsSource="{Binding OpendWindows}">
                        <ListBox.Resources>
                            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent"/>
                            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent"/>
                        </ListBox.Resources>
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="{x:Type ListBoxItem}">
                                <Setter Property="Padding" Value="0"></Setter>
                                <Setter Property="Background" Value="#DCE6F4"></Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="#DCE6F4"></Setter>
                                    </Trigger>
                                    <Trigger Property="IsFocused" Value="True">
                                        <Setter Property="Background" Value="#DCE6F4"></Setter>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </ListBox.ItemContainerStyle>
                    </ListBox>
                </StackPanel>
            </Border>

            <Grid.RenderTransform>
                <TranslateTransform x:Name="ReTranslate"/>
            </Grid.RenderTransform>
        </Grid>

    </Grid>
    
</Window>
